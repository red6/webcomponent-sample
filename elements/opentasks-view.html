<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="task-list.html">
<link rel="import" href="task-subtask-view.html">
<link rel="import" href="redux-store.html">

<dom-module id="opentasks-view">

  <template>
    <style>
      :host {
        --app-primary-color: #008f65;
        --app-secondary-color: black;
        --app-drawer-width: 380px;

        display: block;
      }

      app-drawer-layout:not([narrow]) [drawer-toggle] {
        display: none;
      }

      app-drawer-layout {
        --app-drawer-layout-content-transition: margin 0.2s;
      }

      app-header {
        color: #fff;
        background-color: var(--app-primary-color);
      }

      app-header paper-icon-button {
        --paper-icon-button-ink-color: white;
      }
    </style>

    <app-drawer-layout fullbleed id="drawerLayout">
      <app-drawer slot="drawer">
        <task-list tasks="{{tasks}}"></task-list>
      </app-drawer>
      <div>
        <task-subtask-view main task="{{selectedTask}}"></task-subtask-view>
      </div>

    </app-drawer-layout>
  </template>

  <script>
    class OpentasksView extends TaskView.ReduxMixin(Polymer.Element) {
        static get is() {
            return 'opentasks-view';
        }
        static get properties() {
            return {
                selectedTask: {
                    type: Object
                },
                tasks: {
                    type: Array,
                    statePath: 'tasks',
                },

            }
        }
        connectedCallback() {
            super.connectedCallback();
            this.dispatch('fetchTasks', `tasks.json`, `BLUB`);
        }

    }
    window.customElements.define(OpentasksView.is, OpentasksView);
  </script>

</dom-module>
